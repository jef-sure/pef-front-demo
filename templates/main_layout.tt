<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>[% title %]</title>
	<meta name="keywords" content="">
	<meta name="description" content="">
	<!--[if lt IE 9]> <script src="/jss/html5shiv.js"></script> <![endif]-->
	<link rel="stylesheet" href="/styles/styles.css">
</head>

<body>
[% langs = "get langs".model %]
[% FOR l in langs.langs %]
<form method="post" action="/ajaxSetLang" class="validate ajax lang" id="[% l.lang %]_form">
<input type="hidden" name="lang" value="[% l.lang %]">
<input type="submit" class="btn" value="[% l.language %]">
</form>
[% END %]
	<!-- header -->
	<header class="header">
		<div class="header-inner">
			<!-- logo -->
			<a href="/" class="logo">[% m('This is a PEF::Front Demo Blog') %]</a>
[% author = "get author info".model %]
[% IF author.result ne 'OK' %]
			<!-- login -->
			<div class="login">
				<form method="post" action="/ajaxLoginAuthor" class="validate ajax" id="login_form">
					<input type="text" class="fld w-100" name="login" id="login" placeholder="Login" required minlength="3" maxlength="40">
					<input type="password" class="fld w-100" name="password" id="password" placeholder="Password" required minlength="4" maxlength="40">
					<div class="btn-with-loader disp-ib">
						<input type="submit" class="btn w-100p" id="login_send_btn" value="Login">
						<div class="loader loader-grn hidden" id="loader_login"></div>
					</div>
				</form>
			</div><!-- login -->
[% ELSE %]
			<div class="user-info">
				<strong id="user_name">[% m('Hello $1', author.name) %]</strong>
				<form method="post" action="/ajaxLogoutAuthor" class="ajax" id="logout_form">
				<input type="button" class="btn" value="Logout">
				</form>
			</div><!-- user info -->
[% END %]
		</div>
	</header><!-- header -->

<!-- page -->
<div class="page">
	<!-- main -->
	<main class="main">
[% content %]
	</main><!-- main -->
</div><!-- page -->


<!-- footer -->
<footer class="footer">
	<div class="footer-inner">

		<!-- site name -->
		<div class="site-name">PEF Demo</div>

		<!-- copyrights -->
		<div class="copyrights">All rights reserved</div>

	</div>
</footer><!-- footer -->


<!-- popup -->
<div class="popup hidden" id="popup_box">
	<div class="popup-bg" id="popup_bg"></div>
	<div class="popup-box">
		<input type="button" class="popup-close" id="popup_close_btn" value="">
		<div class="popup-text" id="popup_text"></div>
	</div>
</div><!-- popup -->


<script type="text/javascript">
<!--

	// msg
	var msg = {};

	// fields
	msg.field = {};
	msg.field.login = 'Login';
	msg.field.password = 'Password';
	msg.field.title = 'Title';
	msg.field.content = 'Content';
	msg.field.comment = 'Comment';
	msg.field.captcha = 'Captcha';

	// error messages
	msg.error = {};
	msg.error.field = {};
	msg.error.field.empty = '[% m('Field "{field_name}" is empty') %]';
	msg.error.field.incorrect = '[% m('Field "{field_name}" is incorrect') %]';

	// other messages
	msg.articleHasBeenDeleted = '[% m('<p>Article has been deleted successfully.</p><p><a href="/index" class="btn mb-0">Go to main page</a></p>') %]';

//-->
</script>

<script type="text/javascript" src="/jss/lib/jquery-2.1.3.min.js"></script>

<script type="text/javascript" src="/jss/common/popup.js"></script>
<script type="text/javascript" src="/jss/common/loader.js"></script>
<script type="text/javascript" src="/jss/common/captcha.js"></script>
<script type="text/javascript" src="/jss/common/zform.js"></script>
<script type="text/javascript" src="/jss/common/zform_init.js"></script>

<script type="text/javascript" src="/jss/login_form.js"></script>
<script type="text/javascript" src="/jss/lang_form.js"></script>
<script type="text/javascript" src="/jss/add_article.js"></script>
<script type="text/javascript" src="/jss/article.js"></script>

</body>
</html>